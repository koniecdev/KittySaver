@inherits KittySaver.Wasm.Shared.Components.ApiAwareComponentBase
@inject ILocalStorageService LocalStorage
@inject AuthenticationStateProvider AuthenticationStateProvider
@inject NavigationManager NavigationManager

<nav class="nav">
    <div class="logo">
        <a href="/">
            <img src="/imgs/catWhiteTransparent.webp" alt="">
            uratujkota.pl
        </a>
    </div>
    <div class="hamburger">
        
    </div>
    <div class="nav_content">
        <a href="/">Ogłoszenia</a>
        <a href="/mission">Misja</a>
        <AuthorizeView>
            <Authorized>
                <a href="/user/cats">Moje koty</a>
                <a href="/user/advertisements">Moje ogłoszenia</a>
                <a href="/user/profile">Twój profil</a>
                <a class="cp" @onclick="Logout">Wyloguj</a>
            </Authorized>
            <NotAuthorized>
                <a href="/login">Zaloguj się</a>
                <a href="/register">Zarejestruj się</a>
            </NotAuthorized>
        </AuthorizeView>
    </div>
</nav>
@code
{
    private async Task Logout()
    {
        await LocalStorage.RemoveItemAsync("token");
        await LocalStorage.RemoveItemAsync("token_expires");
        await AuthenticationStateProvider.GetAuthenticationStateAsync();
        await ApiNavigation.RefreshAsync();
        NavigationManager.NavigateTo("/");
    }
}
